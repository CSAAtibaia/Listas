{% extends "base.html" %}

{% block content %}

<div class="page header">
    <h2><i class="fa fa-ra"></i> Lista Ativa <i class="fa fa-empire"></i></h2>
        <p>
            <!-- botões de controle de collapse -->
            <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#lista_ativa" aria-expanded="false" aria-controls="collapseExample">
                Itens da Lista Ativa
            </button>

            <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#locais" aria-expanded="false" aria-controls="collapseExample">
                Itens por Local
            </button>

            <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#pedidos" aria-expanded="false" aria-controls="collapseExample">
                Itens por CoAgri
            </button>
        </p>
        <div class="collapse" id="lista_ativa">
          <!--<div class="card card-body"> Ftaghn </div>-->
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Disponível</th>
                        <th>Item</th>
                        <th class="text-center">Oferta</th>
                        <th class="text-center">Saldo</th>
                    </tr>
                </thead>
                <tbody>
                    {% for object in ativa_tb %}
                        <tr>
                            <td>
                                {% if object.saldo > 0 %}
                                    <i class="fa fa-check-circle ok"></i>
                                {% else %}
                                    <i class="fa fa-minus-circle no"></i>
                                {% endif %}
                            </td>
                            <td>{{ object.item }}</td>
                            <td class="text-center">{{ object.limite }}</td>
                            <td class="text-center">{{ object.saldo }}</td>
                        </tr>
                    {% empty %}
                        <p class="alert alert-warning">Sem Lista Ativa Válida</p>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="collapse" id="locais">
          <!--<div class="card card-body"> Ftaghn </div>-->
            {% regroup pedidos_item_tb|dictsort:"retira" by pedidos_item_tb.pedido.retira as retira_list %}
                <ul>
                {% for retira in retira_list %}
                    <li>{{ retira.grouper }}
                    <ul>
                        {% for item in retira.list %}
                          <li>{{ item.item }}: {{ item.qtde }}</li>
                        {% endfor %}
                    </ul>
                    </li>
                {% empty %}
                    <p class="alert alert-warning">Sem Lista Ativa Válida</p>
                {% endfor %}
                </ul>
        </div>
        <div class="collapse" id="pedidos">
          <!--<div class="card card-body"> Ftaghn </div>-->
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Higieniza</th>
                        <th>Coagri</th>
                    </tr>
                </thead>
                <tbody>
                    {% for object in pedidos_tb %}
                        <tr>
                            <td>
                                {% if object.user.coagri.higieniza %}
                                    <i class="fa fa-check-circle ok"></i>
                                {% else %}
                                    <i class="fa fa-minus-circle no"></i>
                                {% endif %}
                            </td>
                            <td>{{ object.user }}</td>
                        </tr>
                    {% empty %}
                        <p class="alert alert-warning">Sem Pedidos Válidos para a Lista Ativa</p>
                    {% endfor %}
                </tbody>
            </table>
        </div>

</div>

{% endblock content %}